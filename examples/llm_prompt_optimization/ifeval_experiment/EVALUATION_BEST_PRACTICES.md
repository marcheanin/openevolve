# –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –æ—Ü–µ–Ω–∫–∏ –≤ prompt optimization: –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

## ‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–¥—Ö–æ–¥–∞

### 1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è train/validation/test**

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ train split (IFEval –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –µ–≥–æ)
- –û—Ü–µ–Ω–∫–∞ –Ω–∞ **–æ–¥–Ω–∏—Ö –∏ —Ç–µ—Ö –∂–µ –ø—Ä–∏–º–µ—Ä–∞—Ö** –Ω–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ (–ø–µ—Ä–≤—ã–µ 10/40)
- –ù–µ—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–π validation –≤—ã–±–æ—Ä–∫–∏ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è

**–ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –ò—Ç–µ—Ä–∞—Ü–∏—è 1: –ü—Ä–æ–º–ø—Ç A ‚Üí 95% –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö 0-39           ‚îÇ
‚îÇ  –ò—Ç–µ—Ä–∞—Ü–∏—è 2: –ü—Ä–æ–º–ø—Ç B ‚Üí 96% –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö 0-39           ‚îÇ
‚îÇ  –ò—Ç–µ—Ä–∞—Ü–∏—è 3: –ü—Ä–æ–º–ø—Ç C ‚Üí 97% –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö 0-39           ‚îÇ
‚îÇ  ...                                                     ‚îÇ
‚îÇ  –ò—Ç–µ—Ä–∞—Ü–∏—è 100: –ü—Ä–æ–º–ø—Ç Z ‚Üí 99% –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö 0-39         ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                    ‚Üì
         –ù–æ –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö 40-540?
                   ??%
```

**–†–∏—Å–∫–∏:**
- üî¥ **–ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ:** –ü—Ä–æ–º–ø—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É—é—Ç—Å—è –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ 40 –ø—Ä–∏–º–µ—Ä–æ–≤
- üî¥ **–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ–±–æ–±—â–∞—é—â–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å:** –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∞ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö 501 –ø—Ä–∏–º–µ—Ä–µ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞
- üî¥ **–ó–∞–≤—ã—à–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:** –ú–µ—Ç—Ä–∏–∫–∏ –Ω–∞ –ø–µ—Ä–≤—ã—Ö 40 –ø—Ä–∏–º–µ—Ä–∞—Ö –º–æ–≥—É—Ç –Ω–µ –æ—Ç—Ä–∞–∂–∞—Ç—å —Ä–µ–∞–ª—å–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

---

### 2. **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ (–Ω–µ —Å–ª—É—á–∞–π–Ω–∞—è)**

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:**
```python
# –í—Å–µ–≥–¥–∞ –±–µ—Ä—É—Ç—Å—è –ø–µ—Ä–≤—ã–µ N –ø—Ä–∏–º–µ—Ä–æ–≤
indices = range(min(num_samples, len(dataset)))  # [0, 1, 2, ..., N-1]
samples = dataset.select(indices)
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- –í—Å–µ–≥–¥–∞ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã (0-9 –¥–ª—è Stage 1, 0-39 –¥–ª—è Stage 2)
- –ï—Å–ª–∏ –ø–µ—Ä–≤—ã–µ 40 –ø—Ä–∏–º–µ—Ä–æ–≤ –Ω–µ —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ç–∏–≤–Ω—ã ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–º–µ—â—ë–Ω–Ω—ã–µ
- –ù–µ—Ç —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è –≤ –æ—Ü–µ–Ω–∫–µ

**–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–±–ª–µ–º—ã:**
```
–ü–µ—Ä–≤—ã–µ 40 –ø—Ä–∏–º–µ—Ä–æ–≤ IFEval –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
- –ú–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (—Ç–æ–ª—å–∫–æ length_constraints)
- –ú–∞–ª–æ —Å–ª–æ–∂–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π (multiple constraints + formatting)

‚Üí –ü—Ä–æ–º–ø—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É—é—Ç—Å—è –ø–æ–¥ –ø—Ä–æ—Å—Ç—ã–µ —Å–ª—É—á–∞–∏
‚Üí –ù–∞ —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö (40-540) –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–∏–∂–µ
```

---

### 3. **–ú–∞–ª–µ–Ω—å–∫–∏–π —Ä–∞–∑–º–µ—Ä –≤—ã–±–æ—Ä–∫–∏**

**Stage 1: 10 –ø—Ä–∏–º–µ—Ä–æ–≤**
- –û—á–µ–Ω—å –º–∞–ª–µ–Ω—å–∫–∞—è –≤—ã–±–æ—Ä–∫–∞ –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–π –∑–Ω–∞—á–∏–º–æ—Å—Ç–∏
- –ü–æ—Ä–æ–≥ 90% –æ–∑–Ω–∞—á–∞–µ—Ç: –¥–æ–ø—É—Å—Ç–∏–º–æ –Ω–µ –±–æ–ª–µ–µ 1 –æ—à–∏–±–∫–∏
- –í—ã—Å–æ–∫–∞—è –¥–∏—Å–ø–µ—Ä—Å–∏—è (10% –æ—à–∏–±–∫–∞ = 1 –ø—Ä–∏–º–µ—Ä –∏–∑ 10)

**Stage 2: 40 –ø—Ä–∏–º–µ—Ä–æ–≤**
- –í—Å—ë –µ—â—ë –º–∞–ª–∞—è –≤—ã–±–æ—Ä–∫–∞ –∏–∑ 541
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è –æ—à–∏–±–∫–∞: ~7.7% (–ø—Ä–∏ 50% accuracy)
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ–π –æ—Ü–µ–Ω–∫–∏

**–°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –∑–Ω–∞—á–∏–º–æ—Å—Ç—å:**
```
–ü—Ä–∏ accuracy = 85%:
- Stage 1 (10 –ø—Ä–∏–º–µ—Ä–æ–≤): 95% –î–ò = [65%, 100%] (—Å–ª–∏—à–∫–æ–º —à–∏—Ä–æ–∫–æ)
- Stage 2 (40 –ø—Ä–∏–º–µ—Ä–æ–≤): 95% –î–ò = [73%, 97%] (–ø—Ä–∏–µ–º–ª–µ–º–æ, –Ω–æ –Ω–µ –∏–¥–µ–∞–ª—å–Ω–æ)
```

---

### 4. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç–∏**

**–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥:**
- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤—ã–±–æ—Ä–∫–∏ –Ω–∞ –≤—Å–µ—Ö –∏—Ç–µ—Ä–∞—Ü–∏—è—Ö
- –ù–µ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –ø–æ –º–µ—Ä–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —ç–≤–æ–ª—é—Ü–∏–∏
- –ù–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–º–ø—Ç–∞

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –ù–∞ —Ä–∞–Ω–Ω–∏—Ö –∏—Ç–µ—Ä–∞—Ü–∏—è—Ö: 40 –ø—Ä–∏–º–µ—Ä–æ–≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –æ—Ü–µ–Ω–∫–∏
- –ù–∞ –ø–æ–∑–¥–Ω–∏—Ö –∏—Ç–µ—Ä–∞—Ü–∏—è—Ö: –Ω—É–∂–Ω–∞ –±–æ–ª—å—à–∞—è –≤—ã–±–æ—Ä–∫–∞ –¥–ª—è —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è –ª—É—á—à–∏—Ö –ø—Ä–æ–º–ø—Ç–æ–≤
- –°–µ–π—á–∞—Å: –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö

---

## ‚úÖ –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏–∑ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã

### 1. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö: Train / Validation / Test**

**–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ–¥—Ö–æ–¥:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Train (70-80%)      ‚îÇ  Validation (10-15%) ‚îÇ Test ‚îÇ
‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÇ
‚îÇ  –î–ª—è —ç–≤–æ–ª—é—Ü–∏–∏        ‚îÇ  –î–ª—è –≤—ã–±–æ—Ä–∞ –ª—É—á—à–µ–≥–æ  ‚îÇ Final‚îÇ
‚îÇ  –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏       ‚îÇ  –ø—Ä–æ–º–ø—Ç–∞             ‚îÇ –æ—Ü–µ–Ω–∫–∞‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∫ IFEval:**
```
541 –ø—Ä–∏–º–µ—Ä ‚Üí —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞:
- Train: 400 –ø—Ä–∏–º–µ—Ä–æ–≤ (–¥–ª—è —ç–≤–æ–ª—é—Ü–∏–∏)
- Validation: 71 –ø—Ä–∏–º–µ—Ä (–¥–ª—è –≤—ã–±–æ—Ä–∞ –ª—É—á—à–µ–≥–æ)
- Test: 70 –ø—Ä–∏–º–µ—Ä–æ–≤ (–¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏)
```

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- **Train:** –û—Ü–µ–Ω–∫–∞ –ø—Ä–æ–º–ø—Ç–æ–≤ –≤–æ –≤—Ä–µ–º—è —ç–≤–æ–ª—é—Ü–∏–∏ (Stage 1/2)
- **Validation:** –í—ã–±–æ—Ä –ª—É—á—à–µ–≥–æ –ø—Ä–æ–º–ø—Ç–∞ –Ω–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏
- **Test:** –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ **—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑** –ø–æ—Å–ª–µ —ç–≤–æ–ª—é—Ü–∏–∏

---

### 2. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤—ã–±–æ—Ä–∫–∏**

**–ü—Ä–∏–Ω—Ü–∏–ø:** –£–≤–µ–ª–∏—á–∏–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä –≤—ã–±–æ—Ä–∫–∏ –ø–æ –º–µ—Ä–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —ç–≤–æ–ª—é—Ü–∏–∏

**–°—Ç—Ä–∞—Ç–µ–≥–∏—è:**
```python
# –†–∞–Ω–Ω–∏–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏: –±—ã—Å—Ç—Ä–∞—è –æ—Ü–µ–Ω–∫–∞
if iteration < 20:
    stage1_samples = 10
    stage2_samples = 20

# –°—Ä–µ–¥–Ω–∏–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏: —Å—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞
elif iteration < 60:
    stage1_samples = 15
    stage2_samples = 40

# –ü–æ–∑–¥–Ω–∏–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏: —Ç—â–∞—Ç–µ–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
else:
    stage1_samples = 20
    stage2_samples = 80
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –Ω–∞ —Ä–∞–Ω–Ω–∏—Ö —ç—Ç–∞–ø–∞—Ö
- ‚úÖ –ë–æ–ª–µ–µ —Ç–æ—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –ª—É—á—à–∏—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –Ω–∞ –ø–æ–∑–¥–Ω–∏—Ö —ç—Ç–∞–ø–∞—Ö
- ‚úÖ –ë–∞–ª–∞–Ω—Å –º–µ–∂–¥—É —Å–∫–æ—Ä–æ—Å—Ç—å—é –∏ —Ç–æ—á–Ω–æ—Å—Ç—å—é

---

### 3. **–°–ª—É—á–∞–π–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ –∏–ª–∏ —Ä–æ—Ç–∞—Ü–∏—è –ø—Ä–∏–º–µ—Ä–æ–≤**

**–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ (—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π):**
```python
indices = range(num_samples)  # [0, 1, 2, ..., N-1]
```

**–£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ 1: –°–ª—É—á–∞–π–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞**
```python
import random
indices = random.sample(range(len(dataset)), num_samples)
```

**–£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ 2: –°—Ç—Ä–∞—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞**
```python
# –í—ã–±–∏—Ä–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã, –ø–æ–∫—Ä—ã–≤–∞—é—â–∏–µ –≤—Å–µ —Ç–∏–ø—ã –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
indices = stratified_sample(dataset, num_samples, by='instruction_types')
```

**–£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ 3: –†–æ—Ç–∞—Ü–∏—è –ø—Ä–∏–º–µ—Ä–æ–≤**
```python
# –ù–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã
rotation_offset = (iteration * num_samples) % (len(dataset) - num_samples)
indices = range(rotation_offset, rotation_offset + num_samples)
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë–æ–ª—å—à–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è –≤ –æ—Ü–µ–Ω–∫–µ
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ —Ä–∏—Å–∫–∞ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã
- ‚úÖ –ë–æ–ª–µ–µ —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ç–∏–≤–Ω–∞—è –æ—Ü–µ–Ω–∫–∞

---

### 4. **–ö—Ä–æ—Å—Å-–≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏**

**K-Fold Cross-Validation:**
```
5-Fold CV –Ω–∞ train+validation (471 –ø—Ä–∏–º–µ—Ä):

Fold 1: Train –Ω–∞ 377, Validate –Ω–∞ 94
Fold 2: Train –Ω–∞ 377, Validate –Ω–∞ 94
...
Fold 5: Train –Ω–∞ 377, Validate –Ω–∞ 94

‚Üí –°—Ä–µ–¥–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ –≤—Å–µ—Ö folds
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ë–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –æ–±–æ–±—â–∞—é—â–µ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ
- ‚úÖ –°–Ω–∏–∂–µ–Ω–∏–µ –¥–∏—Å–ø–µ—Ä—Å–∏–∏ –æ—Ü–µ–Ω–∫–∏

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –í—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ –∑–∞—Ç—Ä–∞—Ç–Ω–æ (–Ω—É–∂–Ω–æ K —Ä–∞–∑ –æ—Ü–µ–Ω–∏—Ç—å)
- ‚ùå –ù–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —ç–≤–æ–ª—é—Ü–∏–∏ (—Å–ª–∏—à–∫–æ–º –º–µ–¥–ª–µ–Ω–Ω–æ)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **—Ç–æ–ª—å–∫–æ –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏** –ª—É—á—à–µ–≥–æ –ø—Ä–æ–º–ø—Ç–∞

---

### 5. **Early Stopping –Ω–∞ Validation Set**

**–ü—Ä–∏–Ω—Ü–∏–ø:** –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —ç–≤–æ–ª—é—Ü–∏—é, –µ—Å–ª–∏ validation accuracy –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç —Ä–∞—Å—Ç–∏

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```python
best_validation_score = 0
patience = 10  # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –ø–æ—Å–ª–µ 10 –∏—Ç–µ—Ä–∞—Ü–∏–π –±–µ–∑ —É–ª—É—á—à–µ–Ω–∏—è

for iteration in range(max_iterations):
    # –≠–≤–æ–ª—é—Ü–∏—è –Ω–∞ train set
    evolved_prompts = evolve(population, train_set)
    
    # –û—Ü–µ–Ω–∫–∞ –ª—É—á—à–µ–≥–æ –Ω–∞ validation set
    best_prompt = select_best(evolved_prompts, train_set)
    validation_score = evaluate(best_prompt, validation_set)
    
    if validation_score > best_validation_score:
        best_validation_score = validation_score
        patience_counter = 0
    else:
        patience_counter += 1
        if patience_counter >= patience:
            break  # –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —ç–≤–æ–ª—é—Ü–∏–∏
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è
- ‚úÖ –≠–∫–æ–Ω–æ–º–∏—è –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–±–æ—Ä –º–æ–º–µ–Ω—Ç–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏

---

## üîÑ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —É–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ train/validation/test

```python
# –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
dataset = load_dataset("google/IFEval", split="train")
total_size = len(dataset)  # 541

train_size = int(0.7 * total_size)      # ~379 –ø—Ä–∏–º–µ—Ä–æ–≤
validation_size = int(0.15 * total_size)  # ~81 –ø—Ä–∏–º–µ—Ä
test_size = total_size - train_size - validation_size  # ~81 –ø—Ä–∏–º–µ—Ä

# –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –¥–ª—è —Å–ª—É—á–∞–π–Ω–æ—Å—Ç–∏
dataset = dataset.shuffle(seed=42)

train_set = dataset.select(range(train_size))
validation_set = dataset.select(range(train_size, train_size + validation_size))
test_set = dataset.select(range(train_size + validation_size, total_size))
```

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- **Train set (379 –ø—Ä–∏–º–µ—Ä–æ–≤):** –î–ª—è –æ—Ü–µ–Ω–∫–∏ –≤–æ –≤—Ä–µ–º—è —ç–≤–æ–ª—é—Ü–∏–∏
  - Stage 1: —Å–ª—É—á–∞–π–Ω—ã–µ 10 –ø—Ä–∏–º–µ—Ä–æ–≤ (—Ä–∞–∑–Ω—ã–µ –Ω–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏)
  - Stage 2: —Å–ª—É—á–∞–π–Ω—ã–µ 40 –ø—Ä–∏–º–µ—Ä–æ–≤ (—Ä–∞–∑–Ω—ã–µ –Ω–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏)
- **Validation set (81 –ø—Ä–∏–º–µ—Ä):** –î–ª—è –≤—ã–±–æ—Ä–∞ –ª—É—á—à–µ–≥–æ –ø—Ä–æ–º–ø—Ç–∞
  - –û—Ü–µ–Ω–∫–∞ –Ω–∞ –ø–æ–ª–Ω–æ–º validation set –∫–∞–∂–¥—ã–µ N –∏—Ç–µ—Ä–∞—Ü–∏–π
  - Early stopping –µ—Å–ª–∏ –Ω–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è
- **Test set (81 –ø—Ä–∏–º–µ—Ä):** –î–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏
  - **–¢–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑** –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —ç–≤–æ–ª—é—Ü–∏–∏
  - –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è —ç–≤–æ–ª—é—Ü–∏–∏!

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤—ã–±–æ—Ä–∫–∏

```python
def get_evaluation_size(iteration, max_iterations):
    """–ê–¥–∞–ø—Ç–∏–≤–Ω–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä –≤—ã–±–æ—Ä–∫–∏"""
    
    progress = iteration / max_iterations
    
    if progress < 0.3:  # –†–∞–Ω–Ω–∏–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏
        stage1_samples = 10
        stage2_samples = 20
    elif progress < 0.7:  # –°—Ä–µ–¥–Ω–∏–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏
        stage1_samples = 15
        stage2_samples = 40
    else:  # –ü–æ–∑–¥–Ω–∏–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏
        stage1_samples = 20
        stage2_samples = 80
    
    return stage1_samples, stage2_samples
```

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü–æ–ª–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```python
# 1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
dataset = load_dataset("google/IFEval", split="train").shuffle(seed=42)
train_set, validation_set, test_set = split_dataset(dataset, [0.7, 0.15, 0.15])

# 2. –ê–¥–∞–ø—Ç–∏–≤–Ω–∞—è –æ—Ü–µ–Ω–∫–∞
def evaluate_prompt_adaptive(prompt, iteration, max_iterations):
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞–∑–º–µ—Ä –≤—ã–±–æ—Ä–∫–∏
    stage1_samples, stage2_samples = get_evaluation_size(iteration, max_iterations)
    
    # Stage 1: –°–ª—É—á–∞–π–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ –∏–∑ train
    stage1_indices = random.sample(range(len(train_set)), stage1_samples)
    stage1_result = evaluate_on_samples(prompt, train_set, stage1_indices)
    
    if stage1_result < 0.9:
        return {"combined_score": stage1_result, "stage": 1}
    
    # Stage 2: –°–ª—É—á–∞–π–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ –∏–∑ train (–±–æ–ª—å—à–µ –ø—Ä–∏–º–µ—Ä–æ–≤)
    stage2_indices = random.sample(range(len(train_set)), stage2_samples)
    stage2_result = evaluate_on_samples(prompt, train_set, stage2_indices)
    
    return {"combined_score": stage2_result, "stage": 2}

# 3. –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –Ω–∞ validation
def evaluate_on_validation(best_prompt, validation_set):
    """–û—Ü–µ–Ω–∫–∞ –Ω–∞ –ø–æ–ª–Ω–æ–º validation set"""
    return evaluate_on_samples(best_prompt, validation_set, range(len(validation_set)))

# 4. Early stopping
best_validation_score = 0
patience = 10
patience_counter = 0

for iteration in range(max_iterations):
    # –≠–≤–æ–ª—é—Ü–∏—è
    population = evolve(population, evaluate_prompt_adaptive)
    
    # –ö–∞–∂–¥—ã–µ 10 –∏—Ç–µ—Ä–∞—Ü–∏–π: –æ—Ü–µ–Ω–∫–∞ –Ω–∞ validation
    if iteration % 10 == 0:
        best_prompt = select_best(population)
        validation_score = evaluate_on_validation(best_prompt, validation_set)
        
        if validation_score > best_validation_score:
            best_validation_score = validation_score
            patience_counter = 0
        else:
            patience_counter += 1
            if patience_counter >= patience:
                break

# 5. –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –Ω–∞ test set (–û–î–ò–ù –†–ê–ó)
final_prompt = select_best(population)
test_score = evaluate_on_validation(final_prompt, test_set)
print(f"Final test accuracy: {test_score:.2%}")
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ | –£–ª—É—á—à–µ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ |
|----------|---------------|-------------------|
| **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** | ‚ùå –¢–æ–ª—å–∫–æ train | ‚úÖ Train/Validation/Test |
| **–í—ã–±–æ—Ä–∫–∞ –ø—Ä–∏–º–µ—Ä–æ–≤** | ‚ùå –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è (–ø–µ—Ä–≤—ã–µ N) | ‚úÖ –°–ª—É—á–∞–π–Ω–∞—è/—Å—Ç—Ä–∞—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è |
| **–†–∞–∑–º–µ—Ä –≤—ã–±–æ—Ä–∫–∏** | ‚ùå –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π (10/40) | ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π |
| **–ö–æ–Ω—Ç—Ä–æ–ª—å –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è** | ‚ùå –ù–µ—Ç | ‚úÖ Validation set + Early stopping |
| **–§–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞** | ‚ùå –ù–∞ —Ç–µ—Ö –∂–µ –ø—Ä–∏–º–µ—Ä–∞—Ö | ‚úÖ –ù–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–º test set |
| **–°—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å** | ‚ö†Ô∏è –ù–∏–∑–∫–∞—è (–º–∞–ª—ã–µ –≤—ã–±–æ—Ä–∫–∏) | ‚úÖ –í—ã—Å–æ–∫–∞—è |

---

## üîß –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è IFEval

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–±—ã—Å—Ç—Ä–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å)

1. **–°–ª—É—á–∞–π–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ –≤–º–µ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π:**
```python
# –í evaluator.py, —Ñ—É–Ω–∫—Ü–∏—è evaluate_prompt()
import random
indices = random.sample(range(len(dataset)), min(num_samples, len(dataset)))
samples = dataset.select(indices)
```

2. **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ train/validation:**
```python
# –ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞—Ç–∞—Å–µ—Ç–∞
dataset = dataset.shuffle(seed=42)
split_point = int(0.85 * len(dataset))
train_dataset = dataset.select(range(split_point))
validation_dataset = dataset.select(range(split_point, len(dataset)))

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å train_dataset –¥–ª—è —ç–≤–æ–ª—é—Ü–∏–∏
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å validation_dataset –¥–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–π –æ—Ü–µ–Ω–∫–∏
```

### –°—Ä–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

3. **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤—ã–±–æ—Ä–∫–∏**
4. **–ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ –Ω–∞ validation set**
5. **Early stopping**

### –ü–æ–ª–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ)

6. **Train/Validation/Test —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ**
7. **–ö—Ä–æ—Å—Å-–≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏**
8. **–°—Ç—Ä–∞—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ (–ø–æ —Ç–∏–ø–∞–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π)**

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

### 1. **–ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å test set –≤–æ –≤—Ä–µ–º—è —ç–≤–æ–ª—é—Ü–∏–∏!**

‚ùå **–ü–ª–æ—Ö–æ:**
```python
# –ù–ò–ö–û–ì–î–ê —Ç–∞–∫ –Ω–µ –¥–µ–ª–∞—Ç—å!
test_score = evaluate(best_prompt, test_set)  # –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –≤—Ä–µ–º—è —ç–≤–æ–ª—é—Ü–∏–∏
if test_score > threshold:
    evolve_further()
```

‚úÖ **–•–æ—Ä–æ—à–æ:**
```python
# Test set –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¢–û–õ–¨–ö–û –û–î–ò–ù –†–ê–ó –≤ –∫–æ–Ω—Ü–µ
final_prompt = select_best_from_evolution()
final_test_score = evaluate(final_prompt, test_set)  # –¢–æ–ª—å–∫–æ –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á—ë—Ç–∞
```

### 2. **–ù–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å validation set —Å–ª–∏—à–∫–æ–º —á–∞—Å—Ç–æ**

‚ùå **–ü–ª–æ—Ö–æ:**
- –û—Ü–µ–Ω–∏–≤–∞—Ç—å –Ω–∞ validation set –Ω–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏
- –í—ã–±–∏—Ä–∞—Ç—å –ª—É—á—à–∏–π –ø—Ä–æ–º–ø—Ç —Ç–æ–ª—å–∫–æ –ø–æ validation score

‚úÖ **–•–æ—Ä–æ—à–æ:**
- –û—Ü–µ–Ω–∏–≤–∞—Ç—å –Ω–∞ validation set –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ (–∫–∞–∂–¥—ã–µ 10 –∏—Ç–µ—Ä–∞—Ü–∏–π)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å validation –¥–ª—è early stopping, –∞ –Ω–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ –ª—É—á—à–µ–≥–æ

### 3. **–°–æ—Ö—Ä–∞–Ω—è—Ç—å seed –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏**

```python
# –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π seed –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º–æ—Å—Ç–∏
random.seed(42)
numpy.random.seed(42)
dataset = dataset.shuffle(seed=42)
```

---

## üìö –°—Å—ã–ª–∫–∏ –Ω–∞ –ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **Machine Learning Evaluation Best Practices:**
   - Train/Validation/Test split: 70/15/15 –∏–ª–∏ 80/10/10
   - Test set –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑
   - Validation set –¥–ª—è –≤—ã–±–æ—Ä–∞ –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

2. **Evolutionary Algorithms:**
   - –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤—ã–±–æ—Ä–∫–∏ (Guided ES, Surrogate Models)
   - –û—Ü–µ–Ω–∫–∞ –Ω–∞ —Å—É—Ä—Ä–æ–≥–∞—Ç–Ω—ã—Ö –º–æ–¥–µ–ª—è—Ö –Ω–∞ —Ä–∞–Ω–Ω–∏—Ö —ç—Ç–∞–ø–∞—Ö
   - –ü–æ–ª–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –Ω–∞ –ø–æ–∑–¥–Ω–∏—Ö —ç—Ç–∞–ø–∞—Ö

3. **Prompt Optimization:**
   - DSPy: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç validation set –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
   - AutoPrompt: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç train/validation —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ
   - Prompt Engineering: –∫—Ä–æ—Å—Å-–≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏

---

## üîç –ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –º–µ—Ç–æ–¥–∏–∫–∏

### –ö–∞–∫ –±—ã–ª–∏ –ø–æ–ª—É—á–µ–Ω—ã —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ README

**–í–∞–∂–Ω–æ:** –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ README (–Ω–∞–ø—Ä–∏–º–µ—Ä, IFEval: 95.01% ‚Üí 97.41%) –±—ã–ª–∏ –ø–æ–ª—É—á–µ–Ω—ã **–ù–ï** –≤–æ –≤—Ä–µ–º—è —ç–≤–æ–ª—é—Ü–∏–∏, –∞ **–ø–æ—Å–ª–µ** –Ω–µ—ë —á–µ—Ä–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–∫—Ä–∏–ø—Ç `evaluate_prompts.py`.

#### –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:

1. **–≠–≤–æ–ª—é—Ü–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤:**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `evaluator.py` —Å –∫–∞—Å–∫–∞–¥–Ω–æ–π –æ—Ü–µ–Ω–∫–æ–π
   - Stage 1: 10 –ø—Ä–∏–º–µ—Ä–æ–≤ (–±—ã—Å—Ç—Ä–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è)
   - Stage 2: 40 –ø—Ä–∏–º–µ—Ä–æ–≤ (–ø–æ–ª–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –¥–ª—è –ª—É—á—à–∏—Ö –ø—Ä–æ–º–ø—Ç–æ–≤)
   - **–¶–µ–ª—å:** –≠–∫–æ–Ω–æ–º–∏—è API –≤—ã–∑–æ–≤–æ–≤ –≤–æ –≤—Ä–µ–º—è —ç–≤–æ–ª—é—Ü–∏–∏

2. **–§–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ (–ø–æ—Å–ª–µ —ç–≤–æ–ª—é—Ü–∏–∏):**
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `evaluate_prompts.py`
   - –û—Ü–µ–Ω–∫–∞ –Ω–∞ **–ø–æ–ª–Ω–æ–º –¥–∞—Ç–∞—Å–µ—Ç–µ** (541 –ø—Ä–∏–º–µ—Ä –¥–ª—è IFEval, 4000 –¥–ª—è HoVer, 7405 –¥–ª—è HotpotQA)
   - –≠—Ç–æ –≤–∏–¥–Ω–æ –∏–∑ `evaluation_results_evolved_20250809_103002.json`:
     ```json
     {
       "dataset": "ifeval",
       "correct": 527,
       "total": 541,  // ‚Üê –ü–æ–ª–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç!
       "accuracy": 0.9741219963031423
     }
     ```

**–í—ã–≤–æ–¥:** –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ README –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã (–æ—Ü–µ–Ω–∫–∞ –Ω–∞ –ø–æ–ª–Ω–æ–º –¥–∞—Ç–∞—Å–µ—Ç–µ), –Ω–æ **—ç–≤–æ–ª—é—Ü–∏—è** –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ –Ω–∞ –º–∞–ª–æ–π –≤—ã–±–æ—Ä–∫–µ (10/40 –ø—Ä–∏–º–µ—Ä–æ–≤).

---

### –û—Ç–∫—É–¥–∞ –≤–∑—è–ª–∞—Å—å –º–µ—Ç–æ–¥–∏–∫–∞ 10/40 –ø—Ä–∏–º–µ—Ä–æ–≤?

#### –ò—Å—Ç–æ—á–Ω–∏–∫: Cascade Evaluation –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤

**–ò–¥–µ—è cascade evaluation:**
- –ë—ã—Å—Ç—Ä–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–ª–æ—Ö–∏—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –Ω–∞ –º–∞–ª–æ–π –≤—ã–±–æ—Ä–∫–µ
- –ü–æ–ª–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤
- –≠–∫–æ–Ω–æ–º–∏—è ~75% API –≤—ã–∑–æ–≤–æ–≤

**–í—ã–±–æ—Ä —á–∏—Å–µ–ª 10/40:**
```python
# –í evaluator.py (–≤—Å–µ –≤–µ—Ä—Å–∏–∏):
# Fixed to 10 samples for Stage 1 (quick evaluation)
stage1_samples = 10

# Fixed to 40 samples for Stage 2 (comprehensive evaluation)
stage2_samples = 40
```

**–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —ç—Ç–∏ —á–∏—Å–ª–∞:**
- **10 –ø—Ä–∏–º–µ—Ä–æ–≤:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ—Ü–µ–Ω–∫–∏ (–∫–æ–º–ø—Ä–æ–º–∏—Å—Å –º–µ–∂–¥—É —Å–∫–æ—Ä–æ—Å—Ç—å—é –∏ —Ç–æ—á–Ω–æ—Å—Ç—å—é)
- **40 –ø—Ä–∏–º–µ—Ä–æ–≤:** –£–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤ 4 —Ä–∞–∑–∞ –¥–ª—è –±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –ª—É—á—à–∏—Ö –ø—Ä–æ–º–ø—Ç–æ–≤
- **–ü–æ—Ä–æ–≥ 90%:** –ï—Å–ª–∏ –ø—Ä–æ–º–ø—Ç –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç 9 –∏–∑ 10 –ø—Ä–∏–º–µ—Ä–æ–≤, –æ–Ω –≤—Ä—è–¥ –ª–∏ —Ö–æ—Ä–æ—à

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ—Ç–æ–¥–∏–∫–∞ –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è **—ç–≤–æ–ª—é—Ü–∏–∏** (–±—ã—Å—Ç—Ä–∞—è –æ—Ü–µ–Ω–∫–∞), –Ω–æ:
- ‚ùå –ù–µ –±—ã–ª–∞ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–∞ –¥–ª—è **–Ω–∞—É—á–Ω–æ–π —Å—Ç—Ä–æ–≥–æ—Å—Ç–∏**
- ‚ùå –ù–µ —É—á–∏—Ç—ã–≤–∞–ª–∞ —Ä–∏—Å–∫ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è
- ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤—ã–±–æ—Ä–∫—É –≤–º–µ—Å—Ç–æ —Å–ª—É—á–∞–π–Ω–æ–π

---

### –ü–æ—á–µ–º—É –º–µ—Ç–æ–¥–∏–∫–∞ –ø–æ–ø–∞–ª–∞ –≤ ifeval_experiment?

#### –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ evaluator.py

**–ò—Å—Ç–æ—Ä–∏—è:**
1. –û—Å–Ω–æ–≤–Ω–æ–π `evaluator.py` –≤ `llm_prompt_optimization/` –±—ã–ª —Å–æ–∑–¥–∞–Ω —Å –º–µ—Ç–æ–¥–∏–∫–æ–π 10/40
2. –≠—Ç–∞ –º–µ—Ç–æ–¥–∏–∫–∞ –±—ã–ª–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ `ifeval_experiment/evaluator.py`
3. –ú–µ—Ç–æ–¥–∏–∫–∞ –±—ã–ª–∞ –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–∞ –≤–æ –≤—Å–µ—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞—Ö (ifeval, hover, hotpotqa)

**–ö–æ–¥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:**
```python
# –í–æ –í–°–ï–• evaluator.py (ifeval_experiment, hover_experiment, hotpotqa_experiment):
# Fixed to 10 samples for Stage 1 (quick evaluation)
stage1_samples = 10

# Fixed to 40 samples for Stage 2 (comprehensive evaluation)
stage2_samples = 40
```

**–ü–æ—á–µ–º—É –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è `max_samples` –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞:**
- –ü–∞—Ä–∞–º–µ—Ç—Ä `max_samples: 200` –≤ `ifeval_prompt_dataset.yaml` **–∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è**
- –†–∞–∑–º–µ—Ä—ã –≤—ã–±–æ—Ä–∫–∏ **–∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω—ã** –≤ –∫–æ–¥–µ
- –≠—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ –¥–ª—è –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–∏—è –º–µ–∂–¥—É —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º–∏

---

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ: –≠–≤–æ–ª—é—Ü–∏—è vs –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞

| –≠—Ç–∞–ø | –°–∫—Ä–∏–ø—Ç | –†–∞–∑–º–µ—Ä –≤—ã–±–æ—Ä–∫–∏ | –¶–µ–ª—å |
|------|--------|----------------|------|
| **–≠–≤–æ–ª—é—Ü–∏—è** | `evaluator.py` | 10 (Stage 1) / 40 (Stage 2) | –ë—ã—Å—Ç—Ä–∞—è –æ—Ü–µ–Ω–∫–∞ –¥–ª—è –æ—Ç–±–æ—Ä–∞ |
| **–§–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞** | `evaluate_prompts.py` | –ü–æ–ª–Ω—ã–π –¥–∞—Ç–∞—Å–µ—Ç (541) | –¢–æ—á–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –¥–ª—è –æ—Ç—á—ë—Ç–∞ |

**–ü—Ä–æ–±–ª–µ–º–∞:** 
- –≠–≤–æ–ª—é—Ü–∏—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç—ã –Ω–∞ **40 –ø—Ä–∏–º–µ—Ä–∞—Ö**
- –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ **541 –ø—Ä–∏–º–µ—Ä–µ**
- **–†–∞–∑–Ω–∏—Ü–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–π** (–ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –Ω–∞ 40 –ø—Ä–∏–º–µ—Ä–∞—Ö)

---

### –ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–æ–±–ª–µ–º–∞—Ç–∏—á–Ω–æ?

#### 1. **–†–∞–∑—Ä—ã–≤ –º–µ–∂–¥—É —ç–≤–æ–ª—é—Ü–∏–µ–π –∏ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–æ–π**

```
–≠–≤–æ–ª—é—Ü–∏—è (40 –ø—Ä–∏–º–µ—Ä–æ–≤):
  –ü—Ä–æ–º–ø—Ç A: 95% –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö 0-39
  –ü—Ä–æ–º–ø—Ç B: 96% –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö 0-39
  ‚Üí –í—ã–±–∏—Ä–∞–µ—Ç—Å—è –ü—Ä–æ–º–ø—Ç B

–§–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ (541 –ø—Ä–∏–º–µ—Ä):
  –ü—Ä–æ–º–ø—Ç B: 97.41% –Ω–∞ –≤—Å–µ—Ö 541 –ø—Ä–∏–º–µ—Ä–µ
  ‚Üí –ù–æ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–≤—ã—à–µ–Ω–æ, –µ—Å–ª–∏ –ø—Ä–æ–º–ø—Ç –ø–µ—Ä–µ–æ–±—É—á–∏–ª—Å—è –Ω–∞ –ø–µ—Ä–≤—ã–µ 40
```

**–†–∏—Å–∫:** –ü—Ä–æ–º–ø—Ç –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å 97% –Ω–∞ –ø–µ—Ä–≤—ã—Ö 40 –ø—Ä–∏–º–µ—Ä–∞—Ö, –Ω–æ —Ç–æ–ª—å–∫–æ 60-70% –Ω–∞ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö 501.

#### 2. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤–æ –≤—Ä–µ–º—è —ç–≤–æ–ª—é—Ü–∏–∏**

- –ù–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –æ–±–æ–±—â–∞—é—â–µ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –Ω–∞ **–Ω–µ–≤–∏–¥–∏–º—ã—Ö** –ø—Ä–∏–º–µ—Ä–∞—Ö
- –ù–µ—Ç early stopping –ø—Ä–∏ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–∏
- –ù–µ—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è train vs validation accuracy

#### 3. **–§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞**

- –í—Å–µ–≥–¥–∞ –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ –ø—Ä–∏–º–µ—Ä—ã (0-39)
- –ï—Å–ª–∏ —ç—Ç–∏ –ø—Ä–∏–º–µ—Ä—ã –Ω–µ —Ä–µ–ø—Ä–µ–∑–µ–Ω—Ç–∞—Ç–∏–≤–Ω—ã ‚Üí —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–º–µ—â—ë–Ω–Ω—ã–µ
- –ù–µ—Ç —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è –≤ –æ—Ü–µ–Ω–∫–µ

---

### –ö–∞–∫ —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã–ª–æ —Ä–∞–±–æ—Ç–∞—Ç—å (–ª—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏)

#### –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥:

```
1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:
   Train: 400 –ø—Ä–∏–º–µ—Ä–æ–≤ (–¥–ª—è —ç–≤–æ–ª—é—Ü–∏–∏)
   Validation: 71 –ø—Ä–∏–º–µ—Ä (–¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è)
   Test: 70 –ø—Ä–∏–º–µ—Ä–æ–≤ (–¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏)

2. –í–æ –≤—Ä–µ–º—è —ç–≤–æ–ª—é—Ü–∏–∏:
   - Stage 1: –°–ª—É—á–∞–π–Ω—ã–µ 10 –ø—Ä–∏–º–µ—Ä–æ–≤ –∏–∑ Train
   - Stage 2: –°–ª—É—á–∞–π–Ω—ã–µ 40 –ø—Ä–∏–º–µ—Ä–æ–≤ –∏–∑ Train (—Ä–∞–∑–Ω—ã–µ –Ω–∞ –∫–∞–∂–¥–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏)
   - –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏: –û—Ü–µ–Ω–∫–∞ –Ω–∞ Validation (–∫–∞–∂–¥—ã–µ 10 –∏—Ç–µ—Ä–∞—Ü–∏–π)
   - Early stopping: –ï—Å–ª–∏ Validation accuracy –Ω–µ —Ä–∞—Å—Ç—ë—Ç

3. –ü–æ—Å–ª–µ —ç–≤–æ–ª—é—Ü–∏–∏:
   - –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –Ω–∞ Test set (–æ–¥–∏–Ω —Ä–∞–∑)
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ Train vs Validation vs Test accuracy
```

**–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥:**
```
1. –ù–µ—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö (—Ç–æ–ª—å–∫–æ train)
2. –í–æ –≤—Ä–µ–º—è —ç–≤–æ–ª—é—Ü–∏–∏:
   - Stage 1: –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–≤—ã–µ 10 –ø—Ä–∏–º–µ—Ä–æ–≤
   - Stage 2: –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–≤—ã–µ 40 –ø—Ä–∏–º–µ—Ä–æ–≤
   - –ù–µ—Ç –æ—Ü–µ–Ω–∫–∏ –Ω–∞ validation
3. –ü–æ—Å–ª–µ —ç–≤–æ–ª—é—Ü–∏–∏:
   - –û—Ü–µ–Ω–∫–∞ –Ω–∞ –ø–æ–ª–Ω–æ–º train set (541 –ø—Ä–∏–º–µ—Ä)
   - –ù–µ—Ç —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å –Ω–µ–≤–∏–¥–∏–º—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
```

---

### –í—ã–≤–æ–¥—ã –æ –ø—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–∏ –º–µ—Ç–æ–¥–∏–∫–∏

1. **–ú–µ—Ç–æ–¥–∏–∫–∞ 10/40 –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤:**
   - ‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–º–ø—Ç–æ–≤
   - ‚ùå –ù–æ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–∞—É—á–Ω—É—é —Å—Ç—Ä–æ–≥–æ—Å—Ç—å

2. **–§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ README –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã:**
   - ‚úÖ –û—Ü–µ–Ω–∫–∞ –Ω–∞ –ø–æ–ª–Ω–æ–º –¥–∞—Ç–∞—Å–µ—Ç–µ
   - ‚ö†Ô∏è –ù–æ —ç–≤–æ–ª—é—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ –Ω–∞ –º–∞–ª–æ–π –≤—ã–±–æ—Ä–∫–µ

3. **–ü—Ä–æ–±–ª–µ–º–∞ –≤ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
   - ‚ùå –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ –≤–º–µ—Å—Ç–æ —Å–ª—É—á–∞–π–Ω–æ–π
   - ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ train/validation/test —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è
   - ‚ùå –ù–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è

4. **–ú–µ—Ç–æ–¥–∏–∫–∞ –±—ã–ª–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –±–µ–∑ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏:**
   - –ò–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ `evaluator.py` –≤ `ifeval_experiment/evaluator.py`
   - –ë–µ–∑ —É—á—ë—Ç–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏ –Ω–∞—É—á–Ω–æ–π –æ—Ü–µ–Ω–∫–∏
   - –ë–µ–∑ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ª—É—á—à–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ –∏–º–µ–µ—Ç —Å–µ—Ä—å—ë–∑–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- ‚ùå –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è
- ‚ùå –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –æ–±–æ–±—â–∞—é—â–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
- ‚ùå –ú–∞–ª–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å
- ‚ùå –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ –≤–º–µ—Å—Ç–æ —Å–ª—É—á–∞–π–Ω–æ–π

**–ü—Ä–æ–∏—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º:**
- –ú–µ—Ç–æ–¥–∏–∫–∞ 10/40 –±—ã–ª–∞ —Å–æ–∑–¥–∞–Ω–∞ –¥–ª—è **—ç–∫–æ–Ω–æ–º–∏–∏ API –≤—ã–∑–æ–≤–æ–≤** –≤–æ –≤—Ä–µ–º—è —ç–≤–æ–ª—é—Ü–∏–∏
- –ë—ã–ª–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ `evaluator.py` –±–µ–∑ –∞–¥–∞–ø—Ç–∞—Ü–∏–∏
- –ù–µ —É—á–∏—Ç—ã–≤–∞–ª–∞ –Ω–∞—É—á–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –æ—Ü–µ–Ω–∫–µ (train/validation/test)

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
1. ‚úÖ –†–∞–∑–¥–µ–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ train/validation/test
2. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª—É—á–∞–π–Ω—É—é –≤—ã–±–æ—Ä–∫—É –≤–º–µ—Å—Ç–æ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π
3. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤—ã–±–æ—Ä–∫–∏
4. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å validation set –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è
5. ‚úÖ –û—Ü–µ–Ω–∏–≤–∞—Ç—å –Ω–∞ test set —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –≤ –∫–æ–Ω—Ü–µ

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**
1. **–í—ã—Å–æ–∫–∏–π:** –°–ª—É—á–∞–π–Ω–∞—è –≤—ã–±–æ—Ä–∫–∞ + —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ train/validation
2. **–°—Ä–µ–¥–Ω–∏–π:** –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤—ã–±–æ—Ä–∫–∏
3. **–ù–∏–∑–∫–∏–π:** –ö—Ä–æ—Å—Å-–≤–∞–ª–∏–¥–∞—Ü–∏—è (–¥–ª—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏)

**–í–∞–∂–Ω–æ:** –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ README (97.41% –¥–ª—è IFEval) –±—ã–ª–∏ –ø–æ–ª—É—á–µ–Ω—ã –Ω–∞ –ø–æ–ª–Ω–æ–º –¥–∞—Ç–∞—Å–µ—Ç–µ —á–µ—Ä–µ–∑ `evaluate_prompts.py`, –Ω–æ **—ç–≤–æ–ª—é—Ü–∏—è** –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ –Ω–∞ –º–∞–ª–æ–π –≤—ã–±–æ—Ä–∫–µ (40 –ø—Ä–∏–º–µ—Ä–æ–≤), —á—Ç–æ —Å–æ–∑–¥–∞—ë—Ç —Ä–∏—Å–∫ –ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏—è.

